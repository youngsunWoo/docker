<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Chapter5# Spring MVC 시작하기 | Sunny Archive</title>
    <meta name="description" content="개발 관련 블로그">
    <meta name="generator" content="VuePress 1.3.0">
    <link rel="icon" href="/sunny-archive/favicon.ico">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900|Material+Icons">
    
    <link rel="preload" href="/sunny-archive/assets/css/0.styles.a7ac78a8.css" as="style"><link rel="preload" href="/sunny-archive/assets/js/app.20f77d52.js" as="script"><link rel="preload" href="/sunny-archive/assets/js/2.511b4fc5.js" as="script"><link rel="preload" href="/sunny-archive/assets/js/6.7ef6ecd2.js" as="script"><link rel="prefetch" href="/sunny-archive/assets/js/10.a0ef1271.js"><link rel="prefetch" href="/sunny-archive/assets/js/11.6541ddd8.js"><link rel="prefetch" href="/sunny-archive/assets/js/12.1903e15c.js"><link rel="prefetch" href="/sunny-archive/assets/js/13.197863a7.js"><link rel="prefetch" href="/sunny-archive/assets/js/14.9b068972.js"><link rel="prefetch" href="/sunny-archive/assets/js/15.54027cd4.js"><link rel="prefetch" href="/sunny-archive/assets/js/16.524f5d92.js"><link rel="prefetch" href="/sunny-archive/assets/js/17.11708487.js"><link rel="prefetch" href="/sunny-archive/assets/js/18.5d867f86.js"><link rel="prefetch" href="/sunny-archive/assets/js/19.0f648627.js"><link rel="prefetch" href="/sunny-archive/assets/js/20.27ef1d38.js"><link rel="prefetch" href="/sunny-archive/assets/js/21.77345df6.js"><link rel="prefetch" href="/sunny-archive/assets/js/22.085befa6.js"><link rel="prefetch" href="/sunny-archive/assets/js/23.8490966f.js"><link rel="prefetch" href="/sunny-archive/assets/js/24.ec8405cd.js"><link rel="prefetch" href="/sunny-archive/assets/js/25.b0db359b.js"><link rel="prefetch" href="/sunny-archive/assets/js/26.46aa84cd.js"><link rel="prefetch" href="/sunny-archive/assets/js/27.8c499cc1.js"><link rel="prefetch" href="/sunny-archive/assets/js/28.a0f23262.js"><link rel="prefetch" href="/sunny-archive/assets/js/3.6c4817b1.js"><link rel="prefetch" href="/sunny-archive/assets/js/4.360058bb.js"><link rel="prefetch" href="/sunny-archive/assets/js/5.c75d34e9.js"><link rel="prefetch" href="/sunny-archive/assets/js/7.e7a5c462.js"><link rel="prefetch" href="/sunny-archive/assets/js/8.07adb725.js"><link rel="prefetch" href="/sunny-archive/assets/js/9.026c5ddc.js">
    <link rel="stylesheet" href="/sunny-archive/assets/css/0.styles.a7ac78a8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sunny-archive/" class="home-link router-link-active"><!----> <span class="site-name">Sunny Archive</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/youngsunWoo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/youngsunWoo/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/sunny-archive/" class="sidebar-heading clickable router-link-active open"><span>책읽기</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>JAVA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>스프링 인 액션</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sunny-archive/springFramework/springInAction/Chapter01.html" class="sidebar-link">Chapter01# Spring속으로</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter02.html" class="sidebar-link">Chapter02# Spring BeanWiring</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter03.html" class="sidebar-link">Chapter03# 고급와이어링</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter04.html" class="sidebar-link">Chapter04# AOP</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter05.html" class="active sidebar-link">Chapter05# Spring Web Application</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter19.html" class="sidebar-link">Chapter19# 이메일전송하기</a></li><li><a href="/sunny-archive/springFramework/springInAction/Chapter20.html" class="sidebar-link">Chapter20# JXM을 이용한 스프링 빈 관리</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="chapter5-spring-mvc-시작하기"><a href="#chapter5-spring-mvc-시작하기" class="header-anchor">#</a> Chapter5# Spring MVC 시작하기</h1> <h2 id="_1-spring-mvc-시작하기"><a href="#_1-spring-mvc-시작하기" class="header-anchor">#</a> 1. Spring MVC 시작하기</h2> <h3 id="_1-1-스프링-mvc를-통한-요청-추척"><a href="#_1-1-스프링-mvc를-통한-요청-추척" class="header-anchor">#</a> 1.1 스프링 MVC를 통한 요청 추척</h3> <ul><li>request가 출발해 response가 가지고 올때까지 수차례 멈추며 정보를 보내고 집어오고를 반복한다<br> <img src="/sunny-archive/assets/img/image5-1.44f2850e.png" alt="springMVC"></li></ul> <div class="language- extra-class"><pre class="language-text"><code>(1) DispactureServlet이 프론트 컨트롤러 역할을 수행한다.
(2) DispactureServlet은 요청을 전달할 컴포넌트 선택을 위해 Handler Mapping의 도움을 받는다
     - URL주소를 기반으로 결정을 내린다.
(3) DispactureServlet는 선택된 컨트롤러에 요청을 보낸다.
    - 컨트롤러는 서비스 객체에 주요 비지니스 로직을 넘긴다.
(4) 모델과 뷰 이름을 포함하여 다시 DispactureServlet에 요청을 돌려보낸다
(5) DispactureServlet은  view Resolver에 뷰 이름과 실제 구현된 뷰를 맵핑 요청힌다.
(6) 모델 데이터를 전달해주는 뷰의 구현
(7) 뷰는 결과를 랜더링하여 response 객체를 통해 클라이언트로 전달된다. 
</code></pre></div><h3 id="_1-2-스프링-mvc-설정"><a href="#_1-2-스프링-mvc-설정" class="header-anchor">#</a> 1.2 스프링 MVC 설정</h3> <p><strong>DispactureServlet 설정</strong></p> <ul><li>기존(서블릿3, 스프링3.1)엔 DispactureServlet을 web.xml로 설정했으나 java를 통해 설정 가능하다</li> <li>AbstractAnnotationConfigDispatcherServletInitializer를 상속받아 구현</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">spittr<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>support</span><span class="token punctuation">.</span><span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">spittr<span class="token punctuation">.</span>web</span><span class="token punctuation">.</span><span class="token class-name">WebConfig</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpitterWebInitializer</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getRootConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">RootConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletConfigClasses</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token class-name">WebConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getServletMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token string">&quot;/&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>어플리케이션 컨택스트 이야기</strong></p> <ul><li><p>DispactureServlet이 시작되면서 어플리케이션 컨택스트를 생성하고 빈으로 로딩(클래스나 설정파일로 선언)하기 시작</p></li> <li><p>getServletConfigClasses() 메소드 : 어플리케이션 컨택스트를  WebConfig 설정클래스에서 로딩하기를 요청</p></li></ul> <p><strong>스프링 MVC 활성화하기</strong></p> <p>[WebConfig설정]</p> <ul><li>자바 기반의 스프링 MVC설정 &gt; @EnableWebMvc 어노테이션을 븥여준다</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>잔여작업이 남아있는 상태이다</li></ul> <blockquote><p>뷰리졸버 미설정 상태 : 디폴트로 BeanNamedViewResolver를 사용 (빈의 ID와 view인터페이스를 구현한 이름을 매칭시켜 뷰를 결정)<br>
컴포넌트 검색이 비활성화 상태 : 스프링이 컨트롤러를 찾으려면 명시적으로 설정에 컨트롤러를 설정해야함<br>
디폴트서블릿으로 매핑 : 이미지, css등 고정 리소스에 대해 모든 요청을 처리한다</p></blockquote> <ul><li>추가 설정 처리</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableWebMvc</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">&quot;spittr.web&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">{</span>


  <span class="token annotation punctuation">@Bean</span>
  <span class="token keyword">public</span> <span class="token class-name">ViewResolver</span> <span class="token function">viewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// &lt;-뷰리졸버 설정</span>
    <span class="token class-name">InternalResourceViewResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InternalResourceViewResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolver<span class="token punctuation">.</span><span class="token function">setPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;/WEB-INF/views/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    resolver<span class="token punctuation">.</span><span class="token function">setSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;.jsp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> resolver<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configureDefaultServletHandling</span><span class="token punctuation">(</span><span class="token class-name">DefaultServletHandlerConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//&lt;-정적콘텐츠 처리 </span>
    configurer<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li>@ComponentScan어노테이션 추가 &gt; spittr.web 패키지에서 컴포넌트 스캔을 하여 @Controller어노테이션을 붙여주면 된다.</li> <li>ViewResolver 빈 추가 prefix, suffix를 사용해 뷰이름을 jsp파일로 찾아줌 (ex. home &gt; /WEB-INF/views/home.jsp)</li> <li>WebMvcConfigurerAdapter 를 상속받아 addResourceHandlers를 오버라이딩 하여 정적리소스를 처리</li></ul> <p>[RootConfig설정]</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">DataConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span>basePackages<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;spittr&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        excludeFilters<span class="token operator">=</span><span class="token punctuation">{</span>
                <span class="token annotation punctuation">@Filter</span><span class="token punctuation">(</span>type<span class="token operator">=</span><span class="token class-name">FilterType</span><span class="token punctuation">.</span>CUSTOM<span class="token punctuation">,</span> value<span class="token operator">=</span><span class="token class-name">WebPackage</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RootConfig</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebPackage</span> <span class="token keyword">extends</span> <span class="token class-name">RegexPatternTypeFilter</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="간단한-컨트롤러-작성하기"><a href="#간단한-컨트롤러-작성하기" class="header-anchor">#</a> 간단한 컨트롤러 작성하기</h2> <ul><li>단순한 HomeController</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span>“<span class="token operator">/</span>“<span class="token punctuation">,</span> method <span class="token operator">=</span> GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p>@Controller 어노테익션이 붙어있어 컴포넌트스캐닝시 자동으로 HomeController를 스프링 어플리케이션 컨택스트에서 빈으로 선언</p></li> <li><p>home() 메소드에 @RequestMapping의 value애트리뷰드는 메소드가 처리할 요청 패스를 method는 HTTP 메소드를 명시 한다.</p> <p>HTTP GET요청이 들어오면 home()이 호출된다<br>
home() 메소드는 “home”이라는 string을 리턴하며 스프링 MVC에 의해 뷰 이름으로 해석된다.<br>
DispactureServlet은 뷰 리졸버에게 뷰이름으르 실제 뷰를 결정하도록 요청한다.<br>
InternalResourceViewResolver 설정방식으로 “home”이라는 뷰 이름은  /WEB-INF/views/home.jsp 위치의 JSP파일로 결정된다.</p></li></ul> <h3 id="_2-1-컨트롤러-테스팅"><a href="#_2-1-컨트롤러-테스팅" class="header-anchor">#</a> 2.1 컨트롤러 테스팅</h3> <ul><li>어노테이션을 떼고 보면 단순 POJO구조이다</li> <li>단순히 “home”이라는 스트링이 리턴되고 뷰이름인것을 테스트 불가하다.</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeControllerTest</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">HomeController</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HomeController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assertEquals</span><span class="token punctuation">(</span>“home”<span class="token punctuation">,</span> controller<span class="token punctuation">.</span><span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>스프링 3.2부터 HTTP 요청 실행을 테스트 가능</li> <li>“/“에 GET요청을 보내 뷰의 이름이 home인지 검사한다.</li> <li>HomeController의 인스턴스를 MockMvcBulider.standaloneSetup() 으로 전달해 주고</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeControllerTest</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Test</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testHomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token class-name">HomeController</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HomeController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MockMvc</span> mockMcv <span class="token operator">=</span> 
        <span class="token function">standaloneSetup</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    mockMcv<span class="token punctuation">.</span><span class="token function">perform</span><span class="token punctuation">(</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">andExpect</span><span class="token punctuation">(</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span>“home”<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2-클래스-레벨-요청-처리하기"><a href="#_2-2-클래스-레벨-요청-처리하기" class="header-anchor">#</a> 2.2 클래스 레벨 요청 처리하기</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>&quot;<span class="token operator">/</span>“<span class="token punctuation">)</span>            <span class="token comment">// @RequestMapping({“/“, “homepage”}) &lt;- 여러개의 매핑도 가능함</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HomeController</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method <span class="token operator">=</span> GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;home&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li>클래스 레벨의 @RequestMapping으로 변경, HTTP 메소드는 메소드 별로 매핑 되어 있다.</li> <li>클래스 레벨의 @RequestMapping은 모든  핸들러 메소드에 적용되며</li> <li>메소드의 @RequestMapping과 클래스의 @RequestMapping이 조합되어 “/“에 대한 GET 요청을 처리하기 위한 home() 메소드를 가르킨다.</li></ul> <h3 id="_2-3-뷰에-모델-데이터-전달"><a href="#_2-3-뷰에-모델-데이터-전달" class="header-anchor">#</a> 2.3 뷰에 모델 데이터 전달</h3> <ul><li>Spittle를 가져오기 위한 SpittleRepository</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SpittleRepository</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Spittle</span><span class="token punctuation">&gt;</span></span> <span class="token function">findSpittles</span><span class="token punctuation">(</span><span class="token keyword">long</span> max<span class="token punctuation">,</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//최근 20개 Spittle 객체 가져오기</span>
<span class="token comment">// List&lt;Spittle&gt; recent = spittleRepository.findSpittles(Long.MAX_VALUE, 20);</span>
</code></pre></div><ul><li>Spittle 클래스(생략..)</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spittle</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Date</span> time<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Double</span> latitude<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Double</span> longitude<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>SpittleController 클래스</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/spittles&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpittleController</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">SpittleRepository</span> spittleRepository<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">public</span> <span class="token class-name">SpittleController</span><span class="token punctuation">(</span><span class="token class-name">SpittleRepository</span> spittleRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//&lt;-SpittleRepository 주입</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>spittleRepository <span class="token operator">=</span> spittleRepository<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>


  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Spittle</span><span class="token punctuation">&gt;</span></span> <span class="token function">spittles</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>
      model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>     <span class="token comment">//&lt;- model에 받아온 Spittle주입</span>
        spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
      <span class="token keyword">return</span> <span class="token string">&quot;spittles&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="_3-요청-입력받기"><a href="#_3-요청-입력받기" class="header-anchor">#</a> 3. 요청 입력받기</h2> <ul><li>클라이언트가 컨트롤러의 핸들러 메소드에 데이터를 전달해주는 방법들</li></ul> <blockquote><p>쿼리 파라미터<br>
폼 파라미터<br>
패스변수</p></blockquote> <h3 id="_3-1-쿼리-파라미터-입력받기"><a href="#_3-1-쿼리-파라미터-입력받기" class="header-anchor">#</a> 3.1 쿼리 파라미터 입력받기</h3> <ul><li><p>max와 count파라미터를 전달받는 핸들러 메소드 구현하여 페이징 처리</p></li> <li><p>SpittleController에 아래 메소드를 추가</p></li> <li><p>max와 count 파라미터를 지정하지 않더라더도 디폴트값이 들어가도록 설정</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Spittle</span><span class="token punctuation">&gt;</span></span> <span class="token function">spittles</span><span class="token punctuation">(</span>
      <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;max&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span>MAX_LONG_AS_STRING<span class="token punctuation">)</span> <span class="token keyword">long</span> max<span class="token punctuation">,</span>
      <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span> defaultValue<span class="token operator">=</span><span class="token string">&quot;20&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> spittleRepository<span class="token punctuation">.</span><span class="token function">findSpittles</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-패스-파라미터-입력받기"><a href="#_3-2-패스-파라미터-입력받기" class="header-anchor">#</a> 3.2 패스 파라미터 입력받기</h3> <p>: 하나의 spittle을 찾는 핸들러 메소드 작성하기</p> <ul><li>쿼리파라미터 방식</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span>“<span class="token operator">/</span>show&quot;<span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittle</span><span class="token punctuation">(</span>
      <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;spittle_Id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span> 
      <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>리소스 지향 방식의 패스 파라미터로 받기</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/{spittleId}&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittle</span><span class="token punctuation">(</span>
      <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;spittleId&quot;</span><span class="token punctuation">)</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span> 
      <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>@PathVariable 의 어트리뷰트로 들어간 spittleId의 반복 줄이기</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/{spittleId}&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span><span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">spittle</span><span class="token punctuation">(</span>
      <span class="token annotation punctuation">@PathVariable</span> <span class="token keyword">long</span> spittleId<span class="token punctuation">,</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spittleRepository<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span>spittleId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;spittle&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>view</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleView<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleMessage<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.message}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>spittleTime<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>out</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${spittle.time}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><hr> <h2 id="_4-폼-처리-하기"><a href="#_4-폼-처리-하기" class="header-anchor">#</a> 4. 폼 처리 하기</h2> <h3 id="_4-1-폼처리-컨트롤러-작성"><a href="#_4-1-폼처리-컨트롤러-작성" class="header-anchor">#</a> 4.1 폼처리 컨트롤러 작성</h3> <ul><li>입력을 위한 form</li></ul> <div class="language-html extra-class"><pre class="language-html"><code>&lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;
&lt;%@ page session=&quot;false&quot; %&gt;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Spitter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; 
          href=&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">c:</span>url</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/resources/style.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>&quot; &gt;
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>Register<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>


    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      First Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>firstName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      Last Name: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>lastName<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      Email: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      Username: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      Password: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>Register<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>form을 입력받기 위한 컨트롤러 선언</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/spitter&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpitterController</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">SpitterRepository</span> spitterRepository<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Autowired</span>
  <span class="token keyword">public</span> <span class="token class-name">SpitterController</span><span class="token punctuation">(</span><span class="token class-name">SpitterRepository</span> spitterRepository<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>spitterRepository <span class="token operator">=</span> spitterRepository<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>GET<span class="token punctuation">)</span> <span class="token comment">//&lt;-폼 뷰 맵핑</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showRegistrationForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;registerForm&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
   
  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>POST<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processRegistration</span><span class="token punctuation">(</span><span class="token class-name">Spitter</span> spitter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      spitterRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spitter<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 저장</span>
      <span class="token keyword">return</span> <span class="token string">&quot;redirect:/spitter/&quot;</span> <span class="token operator">+</span> spitter<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// &lt;- 프로파일 페이지로 리다이렉트</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/{username}&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>GET<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">showSpitterProfile</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token class-name">Spitter</span> spitter <span class="token operator">=</span> spitterRepository<span class="token punctuation">.</span><span class="token function">findByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
     model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span>spitter<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token keyword">return</span> <span class="token string">&quot;profile&quot;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>결과 출력 view</p> <p>4.2 폼 검증하기</p> <ul><li>검증을 위한 자바 API 에너테이션</li></ul> <blockquote><ul><li>@AssertFalse : false 값만 통과 가능</li> <li>@AssertTrue : true 값만 통과 가능</li> <li>@DecimalMax(value=) : 지정된 값 이하의 실수만 통과 가능</li> <li>@DecimalMin(value=) : 지정된 값 이상의 실수만 통과 가능</li> <li>@Digits(integer=,fraction=) : 대상 수가 지정된 정수와 소수 자리수보다 적을 경우 통과 가능</li> <li>@Future : 대상 날짜가 현재보다 미래일 경우만 통과 가능</li> <li>@Past : 대상 날짜가 현재보다 과거일 경우만 통과 가능</li> <li>@Max(value) : 지정된 값보다 아래일 경우만 통과 가능</li> <li>@Min(value) : 지정된 값보다 이상일 경우만 통과 가능</li> <li>@NotNull : null 값이 아닐 경우만 통과 가능</li> <li>@Null : null일 겨우만 통과 가능</li> <li>@Pattern(regex=, flag=) : 해당 정규식을 만족할 경우만 통과 가능</li> <li>@Size(min=, max=) : 문자열 또는 배열이 지정된 값 사이일 경우 통과 가능</li> <li>@Valid : 대상 객체의 확인 조건을 만족할 경우 통과 가능</li></ul></blockquote> <ul><li>검증된 필드만 전달하기 위한 spitter 클래스 변경</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spitter</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">25</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> password<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> firstName<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@NotNull</span>
  <span class="token annotation punctuation">@Size</span><span class="token punctuation">(</span>min<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> max<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> lastName<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>적합성 확인을 위한 controller의 함수 변경</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;/register&quot;</span><span class="token punctuation">,</span> method<span class="token operator">=</span>POST<span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">processRegistration</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Valid</span> <span class="token class-name">Spitter</span> spitter<span class="token punctuation">,</span>        <span class="token comment">//&lt;-입력 검증</span>
                                     <span class="token class-name">Errors</span> errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>errors<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                                    <span class="token comment">//&lt;-검즘오류 발생시 폼으로 돌아가기 </span>
        <span class="token keyword">return</span> <span class="token string">&quot;registerForm&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      spitterRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>spitter<span class="token punctuation">)</span><span class="token punctuation">;</span>                                
      <span class="token keyword">return</span> <span class="token string">&quot;redirect:/spitter/&quot;</span> <span class="token operator">+</span> spitter<span class="token punctuation">.</span><span class="token function">getUsername</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            
  <span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/sunny-archive/springFramework/springInAction/Chapter04.html" class="prev">
        Chapter04# AOP
      </a></span> <span class="next"><a href="/sunny-archive/springFramework/springInAction/Chapter19.html">
        Chapter19# 이메일전송하기
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/sunny-archive/assets/js/app.20f77d52.js" defer></script><script src="/sunny-archive/assets/js/2.511b4fc5.js" defer></script><script src="/sunny-archive/assets/js/6.7ef6ecd2.js" defer></script>
  </body>
</html>
